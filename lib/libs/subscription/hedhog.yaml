tables:
  subscription_locale:
    columns:
      - type: fk
        name: subscription_id
        isPrimary: true
        references:
          table: subscription
          column: id
          onDelete: CASCADE
      - type: fk
        name: locale_id
        isPrimary: true
        references:
          table: locale
          column: id
          onDelete: CASCADE
      - name: name
        length: 63
        locale:
          en: Subscription Name
          pt: Nome da Assinatura
      - name: description
        length: 255
        locale:
          en: Subscription Description
          pt: Descrição da Assinatura
      - type: created_at
      - type: updated_at
    ifNotExists: true
  subscription_plan_locale:
    columns:
      - type: fk
        name: plan_id
        isPrimary: true
        references:
          table: subscription_plan
          column: id
          onDelete: CASCADE
      - type: fk
        name: locale_id
        isPrimary: true
        references:
          table: locale
          column: id
          onDelete: CASCADE
      - name: name
        length: 63
        locale:
          en: Plan Name
          pt: Nome do Plano
      - name: description
        length: 255
        locale:
          en: Plan Description
          pt: Descrição do Plano
      - type: created_at
      - type: updated_at
    ifNotExists: true
  subscription_plan:
    columns:
      - type: pk
      - type: slug
      - name: duration
        type: enum
        enum:
          - monthly
          - yearly
          - quarterly
      - type: created_at
      - type: updated_at
  subscription_plan_gateway:
    columns:
      - type: pk
      - type: fk
        name: plan_id
        references:
          table: subscription_plan
          column: id
          onDelete: CASCADE
      - type: fk
        name: gateway_id
        references:
          table: payment_gateway
          column: id
          onDelete: CASCADE
      - name: gateway_plan_id
      - type: created_at
      - type: updated_at
  subscription:
    columns:
      - type: pk
      - type: fk
        name: plan_id
        references:
          table: subscription_plan
          column: id
          onDelete: CASCADE
      - type: enum
        name: status
        enum:
          - active
          - expired
          - canceled
      - type: int
        name: limit
        default: 0
      - type: created_at
      - type: updated_at
  subscription_value:
    columns:
      - type: pk
      - type: fk
        name: subscription_id
        references:
          table: subscription
          column: id
          onDelete: CASCADE
      - name: name
      - name: value
      - type: created_at
      - type: updated_at
    indices:
      - columns:
          - subscription_id
          - name
        isUnique: true
  subscription_person:
    columns:
      - type: pk
      - type: fk
        name: subscription_id
        references:
          table: subscription
          column: id
          onDelete: CASCADE
      - type: fk
        name: person_id
        references:
          table: person
          column: id
          onDelete: CASCADE
      - type: enum
        name: role
        enum:
          - admin
          - user
      - type: created_at
      - type: updated_at
    indices:
      - columns:
          - subscription_id
          - person_id
        isUnique: true
  subscription_payment:
    columns:
      - type: pk
      - type: fk
        name: subscription_id
        references:
          table: subscription
          column: id
          onDelete: CASCADE
      - type: fk
        name: payment_id
        references:
          table: payment
          column: id
          onDelete: CASCADE
      - type: datetime
        name: start_at
      - type: datetime
        name: end_at
      - type: created_at
      - type: updated_at
    indices:
      - columns:
          - subscription_id
          - payment_id
        isUnique: true
screens:
  subscription_plan:
    title:
      en: Subscription Plans
      pt: Planos de Assinatura
    menu:
      url: /subscription-plan
      icon: user-check
      name:
        en: Subscription Plans
        pt: Planos de Assinatura
      slug: /subscription-plan
      relations:
        role:
          - where:
              slug: admin
    relations:
      subscription_plan_gateway:
        title:
          en: Gateways
          pt: Provedores
  subscription:
    title:
      en: Subscriptions
      pt: Assinaturas
    menu:
      url: /subscription
      icon: user-check
      name:
        en: Subscriptions
        pt: Assinaturas
      slug: /subscription
      relations:
        role:
          - where:
              slug: admin
    relations:
      subscription_value:
        title:
          en: Values
          pt: Valores
      subscription_person:
        title:
          en: People
          pt: Pessoas
      subscription_payment:
        title:
          en: Payments
          pt: Pagamentos
data:
  route:
    - url: /subscription-plan
      method: GET
      relations: &a1
        role:
          - where:
              slug: admin
    - url: /subscription-plan
      method: POST
      relations: *a1
    - url: /subscription-plan/:id
      method: GET
      relations: *a1
    - url: /subscription-plan/:id
      method: PATCH
      relations: *a1
    - url: /subscription-plan
      method: DELETE
      relations: *a1
    - url: /subscription-plan/:subscriptionPlanId/subscription-plan-gateway
      method: GET
      relations: &a2
        role:
          - where:
              slug: admin
    - url: /subscription-plan/:subscriptionPlanId/subscription-plan-gateway/:id
      method: GET
      relations: *a2
    - url: /subscription-plan/:subscriptionPlanId/subscription-plan-gateway
      method: POST
      relations: *a2
    - url: /subscription-plan/:subscriptionPlanId/subscription-plan-gateway/:id
      method: PATCH
      relations: *a2
    - url: /subscription-plan/:subscriptionPlanId/subscription-plan-gateway
      method: DELETE
      relations: *a2
    - url: /subscription
      method: GET
      relations: &a3
        role:
          - where:
              slug: admin
    - url: /subscription
      method: POST
      relations: *a3
    - url: /subscription/:id
      method: GET
      relations: *a3
    - url: /subscription/:id
      method: PATCH
      relations: *a3
    - url: /subscription
      method: DELETE
      relations: *a3
    - url: /subscription/:subscriptionId/subscription-value
      method: GET
      relations: &a4
        role:
          - where:
              slug: admin
    - url: /subscription/:subscriptionId/subscription-value/:id
      method: GET
      relations: *a4
    - url: /subscription/:subscriptionId/subscription-value
      method: POST
      relations: *a4
    - url: /subscription/:subscriptionId/subscription-value/:id
      method: PATCH
      relations: *a4
    - url: /subscription/:subscriptionId/subscription-value
      method: DELETE
      relations: *a4
    - url: /subscription/:subscriptionId/subscription-person
      method: GET
      relations: &a5
        role:
          - where:
              slug: admin
    - url: /subscription/:subscriptionId/subscription-person/:id
      method: GET
      relations: *a5
    - url: /subscription/:subscriptionId/subscription-person
      method: POST
      relations: *a5
    - url: /subscription/:subscriptionId/subscription-person/:id
      method: PATCH
      relations: *a5
    - url: /subscription/:subscriptionId/subscription-person
      method: DELETE
      relations: *a5
    - url: /subscription/:subscriptionId/subscription-payment
      method: GET
      relations: &a6
        role:
          - where:
              slug: admin
    - url: /subscription/:subscriptionId/subscription-payment/:id
      method: GET
      relations: *a6
    - url: /subscription/:subscriptionId/subscription-payment
      method: POST
      relations: *a6
    - url: /subscription/:subscriptionId/subscription-payment/:id
      method: PATCH
      relations: *a6
    - url: /subscription/:subscriptionId/subscription-payment
      method: DELETE
      relations: *a6
    - url: /subscription/:subscriptionId/subscription-value/:subscription_id
      method: GET
      relations: &a7
        role:
          - where:
              slug: admin
    - url: /subscription/:subscriptionId/subscription-value/:subscription_id
      method: PATCH
      relations: *a7
    - url: /subscription/:subscriptionId/subscription-person/:subscription_id
      method: GET
      relations: &a8
        role:
          - where:
              slug: admin
    - url: /subscription/:subscriptionId/subscription-person/:subscription_id
      method: PATCH
      relations: *a8
  menu:
    - name:
        en: SubscriptionPlan
        pt: SubscriptionPlan
      icon: file
      url: /subscription-plan
      slug: subscription-plan
      relations: *a1
    - name:
        en: SubscriptionPlanGateway
        pt: SubscriptionPlanGateway
      icon: file
      url: /subscription-plan-gateway
      slug: subscription-plan-gateway
      relations: *a2
    - name:
        en: Subscription
        pt: Subscription
      icon: file
      url: /subscription
      slug: subscription
      relations: *a3
    - name:
        en: SubscriptionValue
        pt: SubscriptionValue
      icon: file
      url: /subscription-value
      slug: subscription-value
      relations: *a4
    - name:
        en: SubscriptionPerson
        pt: SubscriptionPerson
      icon: file
      url: /subscription-person
      slug: subscription-person
      relations: *a5
    - name:
        en: SubscriptionPayment
        pt: SubscriptionPayment
      icon: file
      url: /subscription-payment
      slug: subscription-payment
      relations: *a6
  screen:
    - name:
        en: SubscriptionPlan
        pt: SubscriptionPlan
      slug: subscription-plan
      description:
        en: Screen to manage subscription_plan
        pt: Tela para gerenciar subscription_plan
      icon: file
    - name:
        en: SubscriptionPlanGateway
        pt: SubscriptionPlanGateway
      slug: subscription-plan-gateway
      description:
        en: Screen to manage subscription_plan_gateway
        pt: Tela para gerenciar subscription_plan_gateway
      icon: file
    - name:
        en: Subscription
        pt: Subscription
      slug: subscription
      description:
        en: Screen to manage subscription
        pt: Tela para gerenciar subscription
      icon: file
    - name:
        en: SubscriptionValue
        pt: SubscriptionValue
      slug: subscription-value
      description:
        en: Screen to manage subscription_value
        pt: Tela para gerenciar subscription_value
      icon: file
    - name:
        en: SubscriptionPerson
        pt: SubscriptionPerson
      slug: subscription-person
      description:
        en: Screen to manage subscription_person
        pt: Tela para gerenciar subscription_person
      icon: file
    - name:
        en: SubscriptionPayment
        pt: SubscriptionPayment
      slug: subscription-payment
      description:
        en: Screen to manage subscription_payment
        pt: Tela para gerenciar subscription_payment
      icon: file
routes:
  - path: subscription
    children:
      - path: subscription-plan
        lazy:
          component: ./pages/subscription/subscription-plan/index.tsx
      - path: subscription
        lazy:
          component: ./pages/subscription/subscription/index.tsx
