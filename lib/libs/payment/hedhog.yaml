data:
  gateway:
    - name: Stripe
    - name: Mercado Pago
  payment_status:
    - name:
        en: Pending
        pt: Pendente
    - name:
        en: Paid
        pt: Pago
    - name:
        en: Canceled
        pt: Cancelado
    - name:
        en: Expired
        pt: Expirado
    - name:
        en: Refunded
        pt: Reembolsado
  discount_type:
    - name: Desconto com valor fixo
      slug: DISCOUNT_FIXED_VALUE
    - name: Desconto com valor percentual
      slug: DISCOUNT_PERCENTAGE_VALUE
    - name: Preço promocional
      slug: PROMOTIONAL_PRICE
  item:
    - name: Curso - Método Eagle
      slug: EAGLE_METHOD_COURSE
      price: 990
    - name: Plataforma - Trimestral
      slug: PLATFORM_QUARTERLY
      price: 510
    - name: Plataforma - Semestral
      slug: PLATFORM_SEMIANNUAL
      price: 900
    - name: Plataforma - Anual
      slug: PLATFORM_ANNUAL
      price: 1560
  payment_method:
    - name: Cartão de crédito
      slug: CREDIT_CARD
    - name: Cartão de débito
      slug: DEBIT_CARD
    - name: PIX
      slug: PIX
    - name: Dinheiro
      slug: CASH
  card_brand:
    - name: Mastercard
      slug: MASTERCARD
    - name: Visa
      slug: VISA
    - name: Elo
      slug: ELO
    - name: American Express
      slug: AMERICAN_EXPRESS
  payment_method_item:
    - item_id:
        where:
          slug: EAGLE_METHOD_COURSE
      payment_method_id:
        where:
          slug: PIX
      discount_type_id:
        where:
          slug: PROMOTIONAL_PRICE
      value: 850
    - item_id:
        where:
          slug: PLATFORM_QUARTERLY
      payment_method_id:
        where:
          slug: PIX
      discount_type_id:
        where:
          slug: PROMOTIONAL_PRICE
      value: 408
    - item_id:
        where:
          slug: PLATFORM_SEMIANNUAL
      payment_method_id:
        where:
          slug: PIX
      discount_type_id:
        where:
          slug: PROMOTIONAL_PRICE
      value: 720
    - item_id:
        where:
          slug: PLATFORM_ANNUAL
      payment_method_id:
        where:
          slug: PIX
      discount_type_id:
        where:
          slug: PROMOTIONAL_PRICE
      value: 1248
  route:
    - url: /gateway
      method: GET
      relations: &a1
        role:
          - where:
              slug: admin
    - url: /gateway
      method: POST
      relations: *a1
    - url: /gateway/:id
      method: GET
      relations: *a1
    - url: /gateway/:id
      method: PATCH
      relations: *a1
    - url: /gateway
      method: DELETE
      relations: *a1
    - url: /payment-status
      method: GET
      relations: &a2
        role:
          - where:
              slug: admin
    - url: /payment-status
      method: POST
      relations: *a2
    - url: /payment-status/:id
      method: GET
      relations: *a2
    - url: /payment-status/:id
      method: PATCH
      relations: *a2
    - url: /payment-status
      method: DELETE
      relations: *a2
  menu:
    - name:
        en: Gateway
        pt: Gateway
      icon: file
      url: /gateway
      slug: gateway
      relations: *a1
    - name:
        en: PaymentStatus
        pt: PaymentStatus
      icon: file
      url: /payment-status
      slug: payment-status
      relations: *a2
  screen:
    - name:
        en: Gateway
        pt: Gateway
      slug: gateway
      description:
        en: Screen to manage gateway
        pt: Tela para gerenciar gateway
      icon: file
    - name:
        en: PaymentStatus
        pt: PaymentStatus
      slug: payment-status
      description:
        en: Screen to manage payment_status
        pt: Tela para gerenciar payment_status
      icon: file
tables:
  gateway:
    columns:
      - type: pk
      - name: name
        length: 63
        locale:
          en: Gateway Name
          pt: Nome do Gateway
      - type: created_at
      - type: updated_at
    ifNotExists: true
  payment_status:
    columns:
      - type: pk
      - type: slug
      - type: created_at
      - type: updated_at
    ifNotExists: true
  payment_status_locale:
    columns:
      - type: fk
        name: payment_status_id
        isPrimary: true
        references:
          table: payment_status
          column: id
          onDelete: CASCADE
      - type: fk
        name: locale_id
        isPrimary: true
        references:
          table: locale
          column: id
          onDelete: CASCADE
      - name: name
        length: 63
        locale:
          en: Status Name
          pt: Nome do Status
      - type: created_at
      - type: updated_at
    ifNotExists: true
  payment_method:
    columns:
      - type: pk
      - type: slug
      - name: name
        length: 63
        locale:
          en: Method Name
          pt: Nome do Método
      - type: created_at
      - type: updated_at
    ifNotExists: true
  card_brand:
    columns:
      - type: pk
      - type: slug
      - name: name
        length: 63
        locale:
          en: Brand name
          pt: Nome da bandeira
      - type: created_at
      - type: updated_at
    ifNotExists: true
  discount_type:
    columns:
      - type: pk
      - type: slug
      - name: name
        length: 63
        locale:
          en: Discount Type
          pt: Tipo de desconto
      - type: created_at
      - type: updated_at
    ifNotExists: true
  payment:
    columns:
      - type: pk
      - type: slug
      - type: fk
        name: person_id
        references:
          table: person
          column: id
          onDelete: CASCADE
      - type: fk
        name: gateway_id
        references:
          table: gateway
          column: id
          onDelete: RESTRICT
      - name: amount
        type: decimal
        precision: 10
        scale: 2
      - name: status_id
        type: fk
        references:
          table: payment_status
          column: id
          onDelete: RESTRICT
      - name: document
        length: 14
      - type: timestamp
        name: payment_at
        isNullable: true
      - name: currency
        length: 3
      - name: method_id
        type: fk
        references:
          table: payment_method
          column: id
          onDelete: RESTRICT
      - type: fk
        name: brand_id
        references:
          table: card_brand
          column: id
          onDelete: CASCADE
        isNullable: true
      - name: installments
        type: int
        default: 1
      - name: delivered
        type: int
        default: 0
      - type: created_at
      - type: updated_at
    ifNotExists: true
  item:
    columns:
      - type: pk
      - type: slug
      - name: name
      - name: price
        type: decimal
      - type: created_at
      - type: updated_at
    ifNotExists: true
  payment_item:
    columns:
      - type: pk
      - name: payment_id
        type: fk
        references:
          table: payment
          column: id
          onDelete: RESTRICT
      - name: item_id
        type: fk
        references:
          table: item
          column: id
          onDelete: RESTRICT
      - name: unit_price
        type: decimal
        default: 0
      - name: delivered
        type: int
        default: 0
      - type: created_at
      - type: updated_at
  payment_method_item:
    columns:
      - type: pk
      - name: payment_method_id
        type: fk
        references:
          table: payment_method
          column: id
          onDelete: RESTRICT
      - name: item_id
        type: fk
        references:
          table: item
          column: id
          onDelete: RESTRICT
      - name: discount_type_id
        type: fk
        references:
          table: discount_type
          column: id
          onDelete: RESTRICT
      - name: value
        type: decimal
        default: 0
      - type: created_at
      - type: updated_at
    ifNotExists: true
  payment_value:
    columns:
      - type: pk
      - name: payment_id
        type: fk
        references:
          table: payment
          column: id
          onDelete: RESTRICT
      - name: name
      - name: value
      - type: created_at
      - type: updated_at
    ifNotExists: true
  coupon:
    columns:
      - type: pk
      - name: discount_type_id
        type: fk
        references:
          table: discount_type
          column: id
          onDelete: RESTRICT
      - name: code
      - name: description
      - name: value
      - name: is_active
        type: int
        default: 0
      - name: uses_limit
        type: int
        default: 0
      - name: uses_qtd
        type: int
        default: 0
      - type: timestamp
        name: starts_at
      - type: timestamp
        name: ends_at
        isNullable: true
      - type: created_at
      - type: updated_at
    ifNotExists: true
  coupon_item:
    - name: coupon_id
      type: fk
      references:
        table: coupon
        column: id
        onDelete: RESTRICT
      isPrimary: true
    - name: item_id
      type: fk
      references:
        table: item
        column: id
        onDelete: RESTRICT
      isPrimary: true
    - type: created_at
    - type: updated_at
